# ==================================================
# PRE-COMMIT CONFIGURATION
# ==================================================
# SETUP:
#   pre-commit install --hook-type pre-commit
# TEST ALL:
#   pre-commit run --all-files
# UPDATE:
#   pre-commit autoupdate && pre-commit run --all-files

default_install_hook_types: [pre-commit]
default_stages: [pre-commit]

# ==================================================
# PRE-COMMIT HOOKS (fast checks)
# ==================================================
repos:
  # --------------------------------------------------
  # Ruff linter and formatter
  # --------------------------------------------------
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.4
    hooks:
      - id: ruff
        name: Ruff linter (auto-fix)
        args: [--fix]
      - id: ruff-format
        name: Ruff formatter

  # --------------------------------------------------
  # Mypy type checks
  # --------------------------------------------------
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.18.2
    hooks:
      - id: mypy
        name: Type checking (Mypy)
        args: [--config-file=pyproject.toml]
        additional_dependencies:
          - django-stubs
          - djangorestframework-stubs
          - types-requests
          - django
          - djangorestframework
          - supabase
          - PyJWT

  # --------------------------------------------------
  # Pre-commit hooks (yaml, large files, merge conflicts)
  # --------------------------------------------------
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: check-yaml
      - id: check-toml
      - id: check-added-large-files
      - id: check-merge-conflict

  # --------------------------------------------------
  # Detect secrets
  # --------------------------------------------------
  - repo: https://github.com/Yelp/detect-secrets
    rev: v1.5.0
    hooks:
      - id: detect-secrets
        name: Detect secrets

  # --------------------------------------------------
  # Bandit security checks
  # --------------------------------------------------
  - repo: https://github.com/PyCQA/bandit
    rev: 1.8.6
    hooks:
      - id: bandit
        name: Security scan (Bandit)
        args: [-c, pyproject.toml]
        additional_dependencies: ["bandit[toml]"]

